import{h as q,at as ce,au as ve,t as w,l as x,A as C,m as V,av as Te,aw as Qe,ax as Ce,f as b,a3 as qe,O as Oe,ay as Be,az as De,aA as Ae,v as H,j as X,aB as Z,aC as ee,C as $e,T as Ee,Y as He,_ as Ve,u as ze,ap as Me,g as je,a6 as Le,o as _,c as Q,w as a,ak as Ne,a as o,W as L,K as N,a8 as m,L as te,S as g,M as $,ai as W,U,a7 as We,a9 as f,Q as R,e as ae}from"./index.8d354e65.js";import{u as Ue,v as oe,d as Re,p as le,e as Ie,f as Fe,g as ne,s as Ke,h as se,i as Ye,j as re,k as ie,l as Ge,C as ue}from"./ClosePopup.e4e7496c.js";import{u as Je}from"./use-quasar.879ae5ba.js";const Xe=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],Ze=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var de=q({name:"QSkeleton",props:{...ce,tag:{type:String,default:"div"},type:{type:String,validator:e=>Xe.includes(e),default:"rect"},animation:{type:String,validator:e=>Ze.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:l}){const s=V(),u=ve(e,s.proxy.$q),r=w(()=>{const i=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:i[0],height:i[1]}}),n=w(()=>`q-skeleton q-skeleton--${u.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>x(e.tag,{class:n.value,style:r.value},C(l.default))}});const et=x("div",{class:"q-space"});var tt=q({name:"QSpace",setup(){return()=>et}}),at=q({name:"QTooltip",inheritAttrs:!1,props:{...Ue,...Te,...Qe,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:oe},self:{type:String,default:"top middle",validator:oe},offset:{type:Array,default:()=>[14,14],validator:Re},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Ce],setup(e,{slots:l,emit:s,attrs:u}){let r,n;const i=V(),{proxy:{$q:v}}=i,P=b(null),S=b(!1),z=w(()=>le(e.anchor,v.lang.rtl)),O=w(()=>le(e.self,v.lang.rtl)),h=w(()=>e.persistent!==!0),{registerTick:p,removeTick:t}=qe(),{registerTimeout:c}=Oe(),{transitionProps:k,transitionStyle:fe}=Be(e),{localScrollTarget:I,changeScrollEvent:he,unconfigureScrollTarget:me}=Ie(e,G),{anchorEl:y,canShow:ge,anchorEvents:B}=Fe({showing:S,configureAnchorEl:Pe}),{show:pe,hide:M}=De({showing:S,canShow:ge,handleShow:ye,handleHide:we,hideOnRouteChange:h,processOnMount:!0});Object.assign(B,{delayShow:be,delayHide:xe});const{showPortal:F,hidePortal:K,renderPortal:_e}=Ae(i,P,ke,"tooltip");if(v.platform.is.mobile===!0){const d={anchorEl:y,innerRef:P,onClickOutside(T){return M(T),T.target.classList.contains("q-dialog__backdrop")&&He(T),!0}},j=w(()=>e.modelValue===null&&e.persistent!==!0&&S.value===!0);H(j,T=>{(T===!0?Ye:ne)(d)}),X(()=>{ne(d)})}function ye(d){F(),p(()=>{n=new MutationObserver(()=>D()),n.observe(P.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),D(),G()}),r===void 0&&(r=H(()=>v.screen.width+"|"+v.screen.height+"|"+e.self+"|"+e.anchor+"|"+v.lang.rtl,D)),c(()=>{F(!0),s("show",d)},e.transitionDuration)}function we(d){t(),K(),Y(),c(()=>{K(!0),s("hide",d)},e.transitionDuration)}function Y(){n!==void 0&&(n.disconnect(),n=void 0),r!==void 0&&(r(),r=void 0),me(),Z(B,"tooltipTemp")}function D(){Ke({targetEl:P.value,offset:e.offset,anchorEl:y.value,anchorOrigin:z.value,selfOrigin:O.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function be(d){if(v.platform.is.mobile===!0){se(),document.body.classList.add("non-selectable");const j=y.value,T=["touchmove","touchcancel","touchend","click"].map(J=>[j,J,"delayHide","passiveCapture"]);ee(B,"tooltipTemp",T)}c(()=>{pe(d)},e.delay)}function xe(d){v.platform.is.mobile===!0&&(Z(B,"tooltipTemp"),se(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),c(()=>{M(d)},e.hideDelay)}function Pe(){if(e.noParentEvent===!0||y.value===null)return;const d=v.platform.is.mobile===!0?[[y.value,"touchstart","delayShow","passive"]]:[[y.value,"mouseenter","delayShow","passive"],[y.value,"mouseleave","delayHide","passive"]];ee(B,"anchor",d)}function G(){if(y.value!==null||e.scrollTarget!==void 0){I.value=$e(y.value,e.scrollTarget);const d=e.noParentEvent===!0?D:M;he(I.value,d)}}function Se(){return S.value===!0?x("div",{...u,ref:P,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",u.class],style:[u.style,fe.value],role:"tooltip"},C(l.default)):null}function ke(){return x(Ee,k.value,Se)}return X(Y),Object.assign(i.proxy,{updatePosition:D}),_e}}),ot=q({name:"QBar",props:{...ce,dense:Boolean},setup(e,{slots:l}){const{proxy:{$q:s}}=V(),u=ve(e,s),r=w(()=>`q-bar row no-wrap items-center q-bar--${e.dense===!0?"dense":"standard"}  q-bar--${u.value===!0?"dark":"light"}`);return()=>x("div",{class:r.value,role:"toolbar"},C(l.default))}}),E=q({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const s=w(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>x("tr",{class:s.value},C(l.default))}}),A=q({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const s=V(),u=w(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return x("td",{class:u.value},C(l.default));const r=s.vnode.key,n=(e.props.colsMap!==void 0?e.props.colsMap[r]:null)||e.props.col;if(n===void 0)return;const{row:i}=e.props;return x("td",{class:u.value+n.__tdClass(i),style:n.__tdStyle(i)},C(l.default))}}});const lt={class:"row relative-position"},nt={class:"col-auto"},st={class:"text-left"},rt={class:"text-left"},it={class:"text-left"},ut={class:"text-left"},dt={class:"col-grow full-width"},ct={class:"row q-mt-xl"},vt={class:"col"},ft=["src"],ht={__name:"ProfilePage",setup(e){const l=ze(),s=Me(),u=b(!0);Je();const r=b(!0),n=b(),i=b([]),v=b([]),P=[{name:"name",required:!0,label:"Post",align:"left",field:h=>h.post_text,format:h=>`${h}`,sortable:!0}],S=b({rowsPerPage:1e3});H(()=>l.getCurrentPlayer,h=>{n.value=h,i.value=s.getPlayerPosts}),H(()=>l.getPlayerPosts,h=>{i.value=s.getPlayerPosts}),je(async()=>{n.value=l.getCurrentPlayer,await s.fetchPlayerPosts(),i.value=s.getPlayerPosts,u.value=!1}),Le(()=>{});function z(){r.value=!1,l.getAuthState&&(l.signOut(),l.router.push({name:"Login"}))}function O(h){return s.getDateTime(h)}return(h,p)=>(_(),Q(Ne,{persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down",modelValue:r.value,"onUpdate:modelValue":p[3]||(p[3]=t=>r.value=t)},{default:a(()=>[o(te,{class:"bg-primary text-white"},{default:a(()=>[o(ot,null,{default:a(()=>[L(o(N,{label:"Sign out",onClick:p[0]||(p[0]=t=>z()),flat:""},null,512),[[ue]]),o(tt),L((_(),Q(N,{dense:"",flat:"",icon:"close"},{default:a(()=>[o(at,{class:"bg-white text-primary"},{default:a(()=>[m("Close")]),_:1})]),_:1})),[[ue]])]),_:1})]),_:1}),g("div",lt,[g("div",nt,[o(Ge,{flat:"",bordered:"",rows:i.value,columns:P,"row-key":"post_id",pagination:S.value,"onUpdate:pagination":p[1]||(p[1]=t=>S.value=t),"rows-per-page-options":[20],class:"table fixed-center","table-class":"q-px-md-md","table-style":"overflow-x: hidden; text-overflow: ellipsis; min-width: 300px; max-width: 95vw",modelValue:v.value,"onUpdate:modelValue":p[2]||(p[2]=t=>v.value=t),"hide-bottom":""},{header:a(t=>[o(E,{props:t},{default:a(()=>[o(re,{"auto-width":""}),(_(!0),$(U,null,W(t.cols,c=>(_(),Q(re,{"auto-width":"",key:c.name,props:t,class:"text-cardtext"},{default:a(()=>[u.value?(_(),Q(de,{key:0,animation:"wave",type:"text"})):ae("",!0),m(" "+f(c.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(t=>[o(E,{props:t},{default:a(()=>[o(A,{"auto-width":""},{default:a(()=>[o(N,{size:"md",color:"cardtext",dense:"",flat:"",onClick:c=>t.expand=!t.expand,icon:t.expand?"arrow_circle_up":"arrow_circle_down"},null,8,["onClick","icon"])]),_:2},1024),(_(!0),$(U,null,W(t.cols,c=>(_(),Q(A,{key:c.name,props:t,"auto-width":""},{default:a(()=>[u.value?(_(),Q(de,{key:0,animation:"wave",type:"text"})):ae("",!0),m(" "+f(c.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),L(o(E,{props:t},{default:a(()=>[o(A,{"auto-width":""}),o(A,{colspan:"100%"},{default:a(()=>[g("div",null,f(t.row.post_text),1),g("div",st,[m(" Points "),o(ie,{size:"12px",color:"pithee",outline:""},{default:a(()=>[m(f(t.row.points),1)]),_:2},1024)]),g("div",rt,[m(" Votes "),(_(!0),$(U,null,W(t.row.votes,(c,k)=>(_(),$("span",{key:k},[o(ie,{size:"12px",color:"pithee",outline:""},{default:a(()=>[m(f(k=k===0?"single":k===1?"double":k===2?"triple":"showdown")+" : "+f(c),1)]),_:2},1024)]))),128))]),g("div",it," Created: "+f(O(t.row.created_at)),1),g("div",ut," Won: "+f(t.row.won_at===null?" - - - ":O(t.row.won_at)),1)]),_:2},1024)]),_:2},1032,["props"]),[[We,t.expand]])]),"body-cell-datetime":a(t=>[o(E,null,{default:a(()=>[o(A,{key:"created_at",props:t},{default:a(()=>[m(f(O(t.row.created_at)),1)]),_:2},1032,["props"])]),_:2},1024)]),top:a(()=>[g("div",dt,[g("div",ct,[g("div",vt,[g("img",{src:n.value.avatar},null,8,ft)]),o(te,{class:"no-shadow col bg-accent text-right"},{default:a(()=>[o(R,null,{default:a(()=>[m(f(n.value.name),1)]),_:1}),o(R,null,{default:a(()=>[m(" Score: "+f(n.value.score),1)]),_:1}),o(R,null,{default:a(()=>[m("Posts: "+f(i.value.length),1)]),_:1})]),_:1})])])]),_:1},8,["rows","pagination","modelValue"])])])]),_:1},8,["modelValue"]))}};var mt=Ve(ht,[["__scopeId","data-v-d0a13a48"]]),yt=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));export{mt as P,de as Q,at as a,yt as b};
